@{
    ViewBag.Title = "Company Master";
    ViewBag.PageTitle = "Company Master";
}
@using PensionModel.ViewModel
@model CompanyModel
@using (Html.BeginForm("Index", "Company", FormMethod.Post))
{
    <section class="content-header">
        <h1>Company <small>Master</small></h1>
    </section>
    <br />
    <br />
    <br />
    <div class="panel panel-info" id="dvAdd">
        <div class="panel-group" id="accordion" style="height: 500px;">
            <input type="button" id="btnBack" value="Back" class="btnAdd btn btn-primary" />
            <div class="panel panel-info">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <i class="fa fa-institution" aria-hidden="true"></i><a aria-expanded="true" data-toggle="collapse" data-parent="#accordion" href="#dvAddCmy" data-toggle="tooltip" data-placement="bottom" title="Expired Licences!"><span>&nbsp;Company Details&nbsp;</span></a>
                    </h4>
                </div>
                <div class="panel-collapse collapse in" id="dvAddCmy">
                    <div class="panel-body">
                        <div class="table-responsive">

                            <div class="form-group">
                                <div class="col-sm-4">
                                    Company Code                    
                                </div>
                                <div class="col-sm-6">
                                    @Html.TextBoxFor(m => m.CompCode, new { @class = "form-control" })
                                </div>
                            </div>

                            <br />
                            <div class="form-group">
                                <div class="col-sm-12">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    Company Name
                                </div>
                                <div class="col-sm-6">
                                    @Html.TextBoxFor(m => m.CompName, new { @class = "form-control", @onblur = "return CheckExist();" })
                                </div>
                            </div>

                            <br />
                            <div class="form-group">
                                <div class="col-sm-12">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    Company Address
                                </div>
                                <div class="col-sm-6">
                                    @Html.TextAreaFor(m => m.Address, new { @class = "form-control" })
                                </div>
                            </div>

                            <br />
                            <div class="form-group">
                                <div class="col-sm-12">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    Company Email
                                </div>
                                <div class="col-sm-6">
                                    @Html.TextBoxFor(m => m.Email, new { @class = "form-control", @Type = "email" })
                                </div>
                            </div>

                            <br />
                            <div class="form-group">
                                <div class="col-sm-12">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    Contact Person
                                </div>
                                <div class="col-sm-6">
                                    @Html.TextBoxFor(m => m.ContactPerson, new { @class = "form-control" })
                                </div>
                            </div>
                            @*<br />
            <div class="form-group">
                <div class="col-sm-12">
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-4">
                    Type
                </div>
                <div class="col-sm-6">
                      @Html.DropDownListFor(m => m.Type, new List<SelectListItem>() { new SelectListItem() { Text = "--Select Type--", Value = "" }, new SelectListItem() { Text = "High", Value = "1" }, new SelectListItem() { Text = "Medium", Value = "2" }, new SelectListItem() { Text = "Normal", Value = "3" } }, new { @class = "form-control" })
                          
                </div>
            </div>*@
                            <br />
                            <div class="form-group">
                                <div class="col-sm-12">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    Widow Pension
                                </div>
                                <div class="col-sm-6">
                                    @Html.DropDownListFor(m => m.WidowPension, new List<SelectListItem>() { new SelectListItem() { Text = "--Select Widow pension--", Value = "" }, new SelectListItem() { Text = "Yes", Value = "1" }, new SelectListItem() { Text = "No", Value = "2" } }, new { @class = "form-control" })

                                </div>
                            </div>

                            <br />
                            <div class="form-group">
                                <div class="col-sm-12">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    Pension Eligibity(No of years)
                                </div>
                                <div class="col-sm-6">
                                    @Html.TextBoxFor(m => m.PensionEligibityYears, new { @class = "form-control", @Type = "number" })
                                </div>
                            </div>

                            <br />
                            <div class="form-group">
                                <div class="col-sm-12">
                                </div>
                            </div>

                            <br />
                            <div class="form-group">
                                <div class="col-sm-12">
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="panel panel-info">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <i class="fa fa-ticket" aria-hidden="true"></i><a data-toggle="collapse" data-parent="#accordion" href="#dvAddPen" data-toggle="tooltip" data-placement="bottom" title="Expired Licences!"><span>&nbsp;Pension Limit&nbsp;</span></a>
                    </h4>
                </div>
                <div class="panel-collapse collapse" id="dvAddPen">
                    <div class="panel-body">
                        <div class="table-responsive">
                            <br />
                            <div class="form-group">
                                <div class="col-sm-12">
                                </div>
                            </div>
                            @*<div class="form-group">
                                <div class="col-sm-4">
                                    Pension Limit
                                </div>
                                <div class="col-sm-6">
                                    @Html.RadioButtonFor(m => m.PensionLimit, "Yes", new { @onchange = "return PenLimit(this.value);" })Yes
                                @Html.RadioButtonFor(m => m.PensionLimit, "No", new { @checked = true, @onchange = "return PenLimit(this.value);" })No
                                </div>
                            </div>*@
                            <br />
                            <br />
                            <div class="form-group">
                                <div class="col-sm-12">
                                </div>
                            </div>
                            <div id="divLimit" class="form-group">

                                <div class="form-group">
                                    <div class="col-sm-12">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-4">
                                        Employment Type
                                    </div>
                                    <div class="col-sm-6">
                                        @Html.DropDownListFor(m => m.EmployeementType, new List<SelectListItem>() { 
                                    new SelectListItem() { Text = "--Select Employment Type--", Value = "" }, 
                                    new SelectListItem() { Text = "Managment", Value = "1" }, 
                                    new SelectListItem() { Text = "Other", Value = "2" } }, new { @class = "form-control" })
                                    </div>
                                </div>

                                <br />
                                <br />
                                <div class="form-group">
                                    <div class="col-sm-12">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-4">
                                        Grade
                                    </div>
                                    <div class="col-sm-6">
                                        @Html.DropDownListFor(m => m.GradeID, new SelectList(Model.Listgrade, "id", "Grade_Name"), "--Select Grade--", new { @class = "form-control" })@* , @onblur = "return checkformExist();"*@
                                    </div>
                                </div>

                                <br />
                                <br />
                                <div class="form-group">
                                    <div class="col-sm-12">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-4">
                                        Pension Limit
                                    </div>
                                    <div class="col-sm-6">
                                        @Html.TextBoxFor(m => m.Pension_Limit, new { @class = "form-control" })
                                    </div>
                                </div>

                                <br />
                                <br />
                                <div class="form-group">
                                    <div class="col-sm-12">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-4">
                                        Effective Date
                                    </div>
                                    <div class="col-sm-6">
                                        @Html.TextBoxFor(m => m.PenEffDate, new { @class = "form-control pull-right datepicker" })
                                        <span class="input-group-addon"><span class="fa fa-calendar"></span></span>
                                    </div>
                                </div>

                                <br />
                                <br />
                                <br />
                                @if (Model.ListPension != null)
                                {
                                    <div class="panel panel-info">
                                        <div class="panel-heading">
                                            Pension Data
                                        </div>

                                        <div class="panel-body">
                                            <div class="table-responsive" id="Grid2">

                                                <table class="table" id="tbl2">
                                                    <thead>
                                                        <tr>
                                                            @*<th>Company Name</th>*@
                                                            <th>Employeement Type</th>
                                                            <th>Grade</th>
                                                            <th>Pension Limit</th>
                                                            <th>Effective Date</th>
                                                            <th>Status</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        @foreach (var item in Model.ListPension)
                                                        {
                                                            <tr>
                                                                @*<td>@item.CompName</td>*@
                                                                @if (@item.EmployeementType == "1")
                                                                {
                                                                    <td>Management</td>
                                                                }
                                                                else
                                                                {
                                                                    <td>Other</td>
                                                                }
                                                                <td>@item.GradeName</td>
                                                                <td>@item.Pension_Limit</td>
                                                                <td>@item.PenEffDate.Value.ToShortDateString()</td>
                                                                @if (@item.Status == 0)
                                                                {
                                                                    <td>In-Active</td>
                                                                }
                                                                else
                                                                {
                                                                    <td>Active</td>
                                                                }
                                                                <td>
                                                                    @*@Html.ActionLink(" ","GetPension", "Edit", new { @PenId = @item.PenId }, new { @class = "fa fa-pencil-square fa-lg" })*@
                                                                    <a  id="btnEdit" class="fa fa-pencil-square fa-lg" onclick="HiddenField('@item.PenId')"  style="height:20px;width:20px;" />
                                                                </td>
                                                            </tr>
                                                        }
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="panel panel-info">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <i class="fa fa-building" aria-hidden="true"></i><a data-toggle="collapse" data-parent="#accordion" href="#dvAddMCmy" data-toggle="tooltip" data-placement="bottom" title="Expired Licences!"><span>&nbsp;Merging Company&nbsp;</span></a>
                    </h4>
                </div>
                <div class="panel-collapse collapse" id="dvAddMCmy">
                    <div class="panel-body">
                        <div class="table-responsive">
                            <br />
                            <div class="form-group">
                                <div class="col-sm-12">
                                </div>
                            </div>
                            <@*div class="form-group">
                                <div class="col-sm-4">
                                    Merging
                                </div>
                                <div class="col-sm-6">
                                    @Html.RadioButtonFor(m => m.Merging, "Yes", new { @onchange = "return Merging(this.value);" })Yes
                                @Html.RadioButtonFor(m => m.Merging, "No", new { @checked = true, @onchange = "return Merging(this.value);" })No
                                </div>
                            </div>*@

                            <br />
                            <br />
                            <div class="form-group">
                                <div class="col-sm-12">
                                </div>
                            </div>
                            <div id="divMerge" class="form-group">

                                <div class="form-group">
                                    <div class="col-sm-12">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-4">
                                        Merge Company
                                    </div>
                                    <div class="col-sm-6">
                                        @Html.DropDownListFor(m => m.MCmyID, new SelectList(Model.LstCmy, "id", "CompName"), "--Select Company--", new { @class = "form-control", @onblur = "return checkformExist();" })
                                    </div>
                                </div>

                                <br />
                                <br />
                                <div class="form-group">
                                    <div class="col-sm-12">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-4">
                                        Effective Date
                                    </div>
                                    <div class="col-sm-6">
                                        @Html.TextBoxFor(m => m.MergeEffDate, new { @class = "form-control pull-right datepicker" })
                                        <span class="input-group-addon"><span class="fa fa-calendar"></span></span>
                                    </div>
                                </div>

                                <br />
                                <br />
                                <div class="form-group">
                                    <div class="col-sm-12">
                                    </div>
                                </div>

                                <br />
                                <br />
                                <br />
                                @if (Model.ListMergeComp != null)
                                {
                                    <div class="panel panel-info">
                                        <div class="panel-heading">
                                            Merged Company Data
                                    @*<input type="button" id="btnAdd" value="Add New" class="btnAdd btn btn-primary" />*@
                                        </div>

                                        <div class="panel-body">
                                            <div class="table-responsive" id="Grid1">

                                                <table class="table" id="tbl1">
                                                    <thead>
                                                        <tr>
                                                            @*<th>Company Name</th>*@
                                                            <th>Merged Company Name</th>
                                                            <th>Effective Date</th>
                                                            <th>Status</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        @foreach (var item in Model.ListMergeComp)
                                                        {
                                                            <tr>
                                                                @*<td>@item.CompName</td>*@
                                                                <td>@item.CompName</td>
                                                                <td>@item.MergeEffDate.Value.ToShortDateString()</td>
                                                                @if (@item.Status == 0)
                                                                {
                                                                    <td>In-Active</td>
                                                                }
                                                                else
                                                                {
                                                                    <td>Active</td>
                                                                }
                                                                <td>
                                                                    @Html.ActionLink(" ", "Edit", new { @id = @item.MerId }, new { @class = "fa fa-pencil-square fa-lg" })
                                                                </td>
                                                            </tr>
                                                        }
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <div class="form-group">
                <div class="col-sm-12">
                    <input type="submit" name="Button" style="margin: 0px 21px;" value="Save" id="btnSave" class="btn btn-primary" />
                </div>
            </div>
        </div>
    </div>
    <!-- Advanced Tables -->
    <div class="panel panel-info" id="dvGrid">
        <div class="panel-heading">
            Company Data
            <input type="button" id="btnAdd" value="Add New" class="btnAdd btn btn-primary" />
        </div>

        <div class="panel-body">
            <div class="table-responsive" id="Grid">

                <table class="table" id="tbl">
                    <thead>
                        <tr>
                            <th>Code
                            </th>
                            <th>Company
                            </th>
                            <th>Email</th>
                            <th>Status
                            </th>
                            <th>Action
                            </th>
                        </tr>
                    </thead>

                    <tbody>
                        @foreach (var item in Model.ListComp)
                        {
                            <tr>
                                <td>@item.CompCode</td>
                                <td>@item.CompName</td>
                                <td>@item.Email</td>
                                @if (@item.Status == 0)
                                {
                                    <td>In-Active</td>
                                }
                                else
                                {
                                    <td>Active</td>
                                }
                                <td>
                                    @Html.ActionLink(" ", "Edit", new { @id = @item.id }, new { @class = "fa fa-pencil-square fa-lg" })
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>


            </div>
        </div>
    </div>
}
<script>
    $(function () { // will trigger when the document is ready
        $('.RetireDate').datepicker(); //Initialise any date pickers
        $('.datepicker').datepicker(); //Initialise any date pickers
        //$('#divLimit').hide();
        //$('#divMerge').hide();
    });

    function PenLimit(val) {
        debugger;
        if (val == "Yes") {
            $('#divLimit').show();
        }
        else {
            $('#divLimit').hide();
        }
    }
    function Merging(val) {
        debugger;
        if (val == "Yes") {
            $('#divMerge').show();
        }
        else {
            $('#divMerge').hide();
        }
    }
</script>
